<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>MlsetupBuilder </title>
  <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src * 'unsafe-inline'; script-src *; img-src * data: 'unsafe-inline'; connect-src 'self'; worker-src blob: ;" ><!--
  <meta http-equiv="X-Content-Security-Policy" content="default-src *; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'; img-src * data: 'unsafe-inline'; connect-src * 'unsafe-inline'">-->
  <meta name="author" content="Neurolinked">
  <meta name="date" content="September 2021">
	<!-- images on the help section
	<link rel="preload" as="image" href="./images/system/mblends.jpg">
	<link rel="preload" as="image" href="./images/system/prefs.jpg">
	<link rel="preload" as="image" href="./images/system/repobuild.jpg">
	<link rel="preload" as="image" href="./images/system/uncook.jpg">-->
	<!-- end of help preload -->
	<!-- Intro.js -->
	<link rel="stylesheet" href="./node_modules/intro.js/minified/introjs.min.css" />
	<link href="./node_modules/intro.js/themes/introjs-dark.css" rel="stylesheet">
	<!-- End Intro -->
  <!-- BOOtstrap 5 -->
  <link href="./bs511/css/bootstrap.min.css" rel="stylesheet">
  <script type="text/javascript"  src="./bs511/js/bootstrap.bundle.min.js"></script>
  <!--FontAwesome --><link rel="stylesheet" href="./public/fontawesome-free/css/all.min.css" />
	<!--FontAwesome --><script type="text/javascript" src="./public/fontawesome-free/js/all.min.js" ></script>
  <!-- If the require doesn't work, include first the jQuery file  <script src="jquery-3.0.0.min.js"></script> -->
  <script type="text/javascript" src='./js/jquery-3.6.0.min.js'></script>
  <!--jstree library DB -->
	<link rel="stylesheet" href="./js/jstree/themes/default/style.min.css" />
  <link rel="stylesheet" href="./js/jstree/themes/default-dark/style.min.css" />
  <script src="./js/jstree/jstree.min.js" data-source='https://www.jstree.com/' ></script>
  <!--End jstree -->
	<!--hardcoded help tree DB --><script src="./js/help.js" type="text/javascript"></script><!--hardcoded DB -->
	<!--hardcoded normals DB //--><script src="./js/normList.js" type="text/javascript" ></script><!--hardcoded normal DB//-->
  <!--hardcoded MaskList DB --><script src="./js/maskList.js" type="text/javascript"></script><!--hardcoded DB -->
  <!--hardcoded default Model-only  DB --><script src="./js/models.js" type="text/javascript"></script><!--hardcoded DB -->
	<!--hardcoded default Model-only  DB --><script src="./js/hairs.js" type="text/javascript"></script><!--hardcoded DB -->
<!--Material Tree  --><script src="./js/materialTree.js"></script><!--Material Tree -->
<!--Tinny color libraries  --><script src="./js/tinycolor.js" type="text/javascript" data-source='https://github.com/bgrins/TinyColor'></script>
  <!-- Fabric.js http://fabricjs.com/ --><script src="./js/fabric.min.js" type="text/javascript" data-source='http://fabricjs.com/'></script>
  <!--hardcoded microblends default //--><script type="text/javascript" src="./jsons/mbcore.json" ></script><!--hardcoded microblend DB//-->
	<!--hardcoded material default //--><script type="text/javascript" src="./js/materialcore.js" ></script><!--hardcoded material DB//-->
  <script type="text/javascript" src='./js/interface.js'></script>
  <link rel="stylesheet" href="./css/base.css" />
	<style id="addedCSS" type="text/css">.offcanvas-hair {top: 0;right: 0;border-left: 1px solid rgba(0,0,0,.2);transform: translateX(100%);}</style>
	<style id="mlLibCSS" type="text/css"> </style>
  <style id="minfoCSS" type="text/css"> </style>
  </head>
  <body class="px-1">
		<div id="floatMat" class="d-none position-absolute"> </div>
    <!--hardcoded material DB //--><script type="text/javascript" src="./jsons/material_overrides.json" ></script><!--hardcoded material DB//-->
    <div id="dat-container"></div>
<!--THREE.js libraries -->
    <script src='./js/threejs/build/three.min.js'></script>
    <script src='./js/threejs/examples/js/controls/OrbitControls.js'></script>
		<script type='module' src='./js/threejs/src/math/MathUtils.js'></script>
		<script type='module' src='./js/threejs/src/math/Color.js'></script>
		<script type='module' src='./js/threejs/src/scene/Fog.js'></script>
		<!--
		<script src='./js/threejs/examples/js/libs/fflate.min.js'></script>
		<script src='./js/threejs/examples/js/loaders/FBXLoader.js'></script>
		-->
    <script src='./js/threejs/examples/js/loaders/GLTFLoader.js'></script>
    <script src='./js/threejs/examples/js/libs/dat.gui.min.js'></script>
<!--model Library -->
<div class="offcanvas offcanvas-start offcanvas-models bg-dark bg-gradient text-light" tabindex="-1" id="ModelLibrary" aria-labelledby="ModelLibraryLabel" data-bs-backdrop="false">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title " id="ModelLibraryLabel">Model Library</h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-command">
    <div>List of displayable models</div>
    <div class="input-group layer-4">
      <input id="modelFinder" class="form-control " type="text" placeholder="Search in the models library" aria-label="models searcher">
      <button type="button" id="modelFinderCleared"  data-toggle="tooltip" title="Clear the search field" class="btn text-warning"><i class="fa fa-times"></i> </button>
    </div>
		<nav class="navbar navbar-expand-lg navbar-dark ">
  		<div class="container-fluid">
		<button type="button" class="btn btn-outline-warning" id="mlPosX" title='Move me'><i class="fas fa-caret-right"></i></button>
    <div class="btn-group w-100 mt-1" role="group" aria-label="models filtering">
			<button type="button" id="modelFinderCloser" data-toggle="tooltip" title="Reset the tree to the default state" class="btn bg-transparent text-warning"><i class="fas fa-door-closed"></i> </button>
			<button type="button" class="btn btn-outline-warning" disabled>...category filtering...</button>
		</div>
			</div>
		</nav>
  </div>
  <div class="offcanvas-body">
    <div id="modelsTree" class="layer-1 px-1 pb-1 mt-2 shadow"></div>
  </div>
</div>
<!--Notification Area -->
<div class="offcanvas offcanvas-bottom bg-dark bg-gradient text-light" tabindex="-1" id="NotificationCenter" aria-labelledby="NCLabel">
  <div class="offcanvas-header bg-info">
    <h5 class="offcanvas-title text-dark" id="NCLabel">Notification center</h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body m-2 p-2"></div>
</div>
<!--  -->
<div class="offcanvas offcanvas-end offcanvas-hair bg-dark bg-gradient text-light" data-bs-backdrop="false" tabindex="-1" id="HairTool" aria-labelledby="HTLabel" >
  <div class="offcanvas-header bg-dark">
    <h5 class="offcanvas-title text-light" id="HTLabel">Hair tool</h5>
    <button type="button" class="btn text-reset text-light" data-bs-dismiss="offcanvas" aria-label="Close"><i class="fa-solid fa-xmark"></i></button>
  </div>
  <div class="offcanvas-body m-2 p-2">
		<span class='experimental'>
		<div class="row gx-0 ">
			 <div class="col-11">
				<div id="hairSwatches" class=''></div>
				<div id="hairprofileBuilder" class="layer-1 rounded-0 "><!-- maximum shades will be 5 at the start-->
						<span class="badge layer-0 w-100 rounded-0">Shades planner</span>
						<div class="p-2">
							<div class="row gx-0 mb-2"><span class="col-2 badge py-auto text-end pt-2 pe-2 eq-lay1">RootToTip</span><div class="col-10 grad" id="hRootToTip"> </div></div>
							<div class="row gx-0" ><span class="col-2 badge py-auto text-end pt-2 pe-2 eq-lay1">ID</span><div class="col-10 grad" id="hID" > </div></div>
						</div>
				</div>
			</div>
			<div class="col-1 d-flex justify-content-center flex-wrap" id="sp-gradients">
				<div></div>
				<div></div>
				<input type="color" class="d-block m-auto" id="bkgshades">
			</div>
		</div>
		<div class="row gx-0 ">
			<canvas class="m-1" style="max-width:256px;max-height:256px;border: 1px solid var(--layer-9);" height="256" width="256" id="hairTex" ></canvas>
		</div>
		</span>
	</div>
</div>
<!-- offcanvas for model information -->
<div class="offcanvas offcanvas-end ocModelInfo bg-dark text-light" data-bs-backdrop="false" tabindex="-1" id="InfoModel" aria-labelledby="HTLabel" >
  <div class="offcanvas-header border border-info p-1">
    <h5 class="offcanvas-title text-info" id="HTLabel">Model Information</h5>
    <button type="button" class="btn text-reset text-dark" data-bs-dismiss="offcanvas" aria-label="Close"><i class="fa-solid fa-xmark"></i></button>
  </div>
  <div class="offcanvas-body m-1 p-0 experimental">
    <div>
      <span class='d-block p-1'>Object Paths</span>
      <form id='modelUserDataForm' class="p-2 eq-lay1">
        <input type="text" class='d-none'  id="lastCustomMDL" readonly />
        <input type="number" class="d-none" id="maskLayer" value="0" min="0" max="20"  />
        <input type="number" class="d-none" id="maxLayers" value="19" min="0" max="19"  />
        <div class="input-group input-group-sm mb-2">
          <span class="input-group-text bg-dark text-info border-info" ><i class="fas fa-cube"></i></span>
          <input type="text" size="10" class="form-control" loaded="false" id="modelTarget" placeholder="path to the model" readonly />
          <button id="modelCopyPath" type="button" class="btn btn-outline-info " data-toggle="tooltip" title="Copy folder path information on glb model"><i class="fas fa-copy"></i></button>
        </div>
        <div class="input-group input-group-sm border-secondary mb-2">
          <span class="input-group-text bg-dark text-info border-info"><i class="fas fa-mask"></i></span>
          <input type="text" class="form-control form-control-sm" id="masksTemplate" placeholder="path to the masks" readonly>
         <!--<button id="CusModelTex" type="button" class="btn btn-outline-info " data-toggle="tooltip" title="Connect a masksset "><i class="fas fa-anchor"></i></button>-->
          <button id="modelTexPath" type="button" class="btn btn-outline-info " data-toggle="tooltip" title="Copy folder path information for the maskset "><i class="fas fa-copy"></i></button>
        </div>
        <div class="input-group input-group-sm border-secondary">
          <span class="input-group-text bg-dark text-info border-info"><i class="fas fa-compress-alt"></i></span>
          <input type="text" class="form-control form-control-sm" id="normTemplate" placeholder="path to the normal map" readonly>
          <!--
         <button id="CusModelTex" type="button" class="btn btn-outline-info " data-toggle="tooltip" title="Connect a masksset "><i class="fas fa-anchor"></i></button>-->
          <button id="modelNorPath" type="button" class="btn btn-outline-info " data-toggle="tooltip" title="Copy folder path information for normal map "><i class="fas fa-copy"></i></button>
        </div>
      </form>
    </div><!--end first element -->
    <div id="theMinformator "class="d-flex align-items-start m-1 p-1 border border-info">
      <div class="nav flex-column nav-pills me-3 " id="v-pills-sMesh" role="tablist" aria-orientation="vertical"> </div>
      <div class="tab-content" id="v-pills-tabContent"> </div>
    </div><!--end second element -->
    <div class="text-center">
      <span class='d-block p-1 text-start'>Normal map</span>
      <canvas id="normalMe" class="my-1" ></canvas>
    </div>
	</div>
</div>
<!-- -->
<div class="offcanvas offcanvas-end bg-dark bg-gradient text-light" tabindex="-1" id="HowDoI" aria-labelledby="HDILabel" data-bs-backdrop="false">
  <div class="offcanvas-header bg-info">
    <h5 class="offcanvas-title text-dark" id="HDILabel">Documentation</h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body m-2 p-2">
		<div id="HelpTree" class="layer-1 px-1 pb-1 mt-2 shadow rounded "></div>
	</div>
</div>
<div id="interface">
  <span id="withbones"><i class="fa-solid fa-bone fa-2x"></i> <i class="fa-solid fa-arrow-down-up-across-line fa-2x"></i></span><!--  -->
  <div id="withthacanvas">
  <canvas id="thacanvas"></canvas>
  <div id="modelsInformation" class="p-2 rounded layer-1">
    <div class="btn-group btn-group-sm" role="group" aria-label="Basic example">
			<input type="checkbox" class="d-none" id="prefloaded" disabled />
			<input class="d-none" type="text" name="prefxunbundle" id="prefxunbundle" val="" />
      <!--<input type="checkbox" class="btn-check" id="switchSkinned" checked autocomplete="off"><label class="btn btn-outline-warning" for="switchSkinned">Only Skinned</label>-->
      <!--<button class="btn btn-outline-info" type="button" data-bs-toggle="modal" data-bs-target="#modalHelp" ><i class="fas fa-question "></i></button>//-->
      <button id="notyCounter" type="button" class="btn btn-outline-info btn-sm text-start" data-bs-toggle="offcanvas" data-bs-target="#NotificationCenter" data-toggle="tooltip" title="Click to see notification messages and errors"><i class="fas fa-exclamation-triangle"></i> <span class="badge bg-warning text-dark"></span></button>
      <input type="checkbox" class="btn-check" id="onlyOneSide" autocomplete="off"><label class="btn btn-outline-warning" for="onlyOneSide">1-side</label>
      <input type="checkbox" data-toggle="tooltip" title="display wireframe" class="btn-check" id="wireFrame" autocomplete="off"><label class="btn btn-outline-warning" for="wireFrame"><i class="fas fa-border-none"></i></label>
			<a class="btn btn-outline-info" href="#" id="takeashot" ><i class="fas fa-camera-retro"></i></a>
    </div>
		<div class="btn-group ms-3 me-2" role="group" aria-label="model loading">
	    <button type="button" data-bs-toggle="offcanvas" data-bs-target="#ModelLibrary" class="btn btn-out-Prim"><i class="fas fa-cubes"></i> Models library</button>
	    <button type="button" id="btnMdlLoader" data-toggle="tooltip" title="load or reload the last 3d model" class="btn btn-out-Prim"><i class="fas fa-redo"></i></button>
		</div>
		<button type="button" id="cstMdlLoader" data-toggle="tooltip" title="Upload in the viewport a 3d asset" class="btn btn-out-Prim"><i class="fas fa-box-open"></i></button>
   <!--<div class="mt-3">-->
   <div class="btn-group " role="group" aria-label="information and data">
     <!--<button class="btn btn-sm btn-outline-info ms-3" type="button" data-bs-toggle="modal" data-bs-target="#modalInfo" ><i class="fas fa-info "></i></button>-->
     <button class="btn btn-sm btn-outline-info" type="button" data-bs-toggle="offcanvas" data-bs-target="#InfoModel" ><i class="fas fa-info"></i></button>
     <!--

     <div class="btn-group dropend ">
        <a class="btn btn-sm btn-outline-info dropdown-toggle" href="#" role="button" id="dropModelDatas" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-cubes"></i></a>
         <div class="dropdown-menu eq-lay1 " style="width:40rem">
          <form id='modelUserDataForm' class="px-2 py-1">
            <input type="text" class='d-none'  id="lastCustomMDL" readonly />
            <input type="number" class="d-none" id="maskLayer" value="0" min="0" max="20"  />
            <input type="number" class="d-none" id="maxLayers" value="19" min="0" max="19"  />
            <div class="input-group input-group-sm mb-2">
              <span class="input-group-text bg-dark text-info" ><i class="fas fa-cube"></i></span>
              <input type="text" size="10" class="form-control" loaded="false" id="modelTarget" placeholder="path to the model" readonly />
              <button id="modelCopyPath" type="button" class="btn btn-outline-info " data-toggle="tooltip" title="Copy folder path information on glb model"><i class="fas fa-copy"></i></button>
            </div>
            <div class="input-group input-group-sm border-secondary mb-2">
              <span class="input-group-text bg-dark text-info"><i class="fas fa-mask"></i></span>
              <input type="text" class="form-control form-control-sm" id="masksTemplate" placeholder="path to the masks" readonly>
             <button id="CusModelTex" type="button" class="btn btn-outline-info " data-toggle="tooltip" title="Connect a masksset "><i class="fas fa-anchor"></i></button>
              <button id="modelTexPath" type="button" class="btn btn-outline-info " data-toggle="tooltip" title="Copy folder path information for the maskset "><i class="fas fa-copy"></i></button>
            </div>
						<div class="input-group input-group-sm border-secondary">
							<span class="input-group-text bg-dark text-info"><i class="fas fa-compress-alt"></i></span>
							<input type="text" class="form-control form-control-sm" id="normTemplate" placeholder="path to the normal map" readonly>
							<!--
						 <button id="CusModelTex" type="button" class="btn btn-outline-info " data-toggle="tooltip" title="Connect a masksset "><i class="fas fa-anchor"></i></button>
							<button id="modelNorPath" type="button" class="btn btn-outline-info " data-toggle="tooltip" title="Copy folder path information for normal map "><i class="fas fa-copy"></i></button>
						</div>
          </form>
        </div>
      </div>-->
   </div>
    <!--</div>-->
  </div>
</div>
  <div id="Filemanager" class="p-2 text-white bs-dark layer-1 rounded" style="display:grid;">
    <div>
      <div class="input-group input-group-sm">
        <input type="file" class="form-control" accept=".json" placeholder="Load JSON mlsetup"  id="importTech" />
        <button class="btn btn-Prim" type="button" id="TheMagicIsHere" data-toggle="tooltip" data-bs-placement="right" title="Import a json file"><i class="fas fa-file-upload"></i></button>
      </div>
      <textarea id="passaggio" class="d-none"></textarea>
    </div>
    <div id="pBar" class="progress fade mx-2">
  		<div class="progress-bar progress-bar-striped bg-danger progress-bar-animated" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>
		</div>
    <div>
      <div class="input-group input-group-sm">
        <input type="text" value="" class="form-control " aria-label="emptyLevel"  id="nametoexport"  placeholder="filename without extension" accept=".json"  />
				<div class="dropdown">
				  <button class="btn btn-sm dropdown-toggle btn-Prim rounded-0 p-1" type="button" id="exportversions" data-bs-toggle="dropdown" aria-expanded="false" title="Export the actual layer structure to json format to be transformed by the Wkit family tools in .mlsetup" ><i class="fas fa-save"></i> Export</button>
				  <ul id="xport_dm" class="dropdown-menu" aria-labelledby="exportversions">
            <li><a class="dropdown-item xportJSON" href="#" id="exportJason_v2" data-version="2">Json v0.0.2 (Wkit 8.7)</a></li>
				    <li><a class="dropdown-item xportJSON" href="#" id="exportJason_v1" data-version="1">Json v0.0.1 (Wkit 8.5)</a></li>
				    <li><a class="dropdown-item xportJSON" href="#" id="exportJason" data-version="0">pre-Wkit 8.5</a></li>
				  </ul>
				</div>
      </div>
  </div>
  </div>
  <div id="MlEditor" class="text-white layer-1 rounded">
    <span class="badge w-100 rounded-0 ">Layers</span>
		<div class="d-grid"><button class="btn btn-out-Prim btn-sm" id="applytoMyLayer" type="button" data-toggle="tooltip" data-bs-placement="left" title="Apply edits to the current selected layer"><i class="fas fa-paint-roller"></i> Apply edits</button></div>
    <ul id="layeringsystem" class="layer-2">
      <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >0</li>
        <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >1</li>
        <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >2</li>
        <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >3</li>
        <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >4</li>
        <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >5</li>
        <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >6</li>
        <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >7</li>
        <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >8</li>
        <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >9</li>
        <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >10</li>
        <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >11</li>
        <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >12</li>
        <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >13</li>
        <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >14</li>
        <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >15</li>
        <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >16</li>
        <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >17</li>
        <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >18</li>
        <li  data-labels="(null_null) unused" class=""  data-mattile="1.0" data-material="base\surfaces\materials\special\unused.mltemplate" data-opacity="1.0" data-color="null_null" data-normal="null" data-roughin="null" data-roughout="null" data-metalin="null" data-metalout="null" data-offsetu="0.0" data-offsetv="0.0" data-mblend="base\surfaces\microblends\default.xbm" data-mbtile="1.0" data-mbcontrast="0.0" data-mbnormal="1.0" data-mboffu="0" data-mboffv="0" >19</li>
    </ul>
    <div class="text-center">
      <div class="btn-group btn-group-sm m-1 " role="group" aria-label="Layers randomizer">
				<button type="button" class="btn btn-outline-warning" id="layerRandomizer" data-toggle="tooltip" title="Randomize layers"><i class="fas fa-random"></i></button>
				<input id="layerRandomCfg" class="form-control rounded-0 border border-warning" type="text" placeholder="Ex. 0-19 or 0,2,7-13" aria-label="models searcher" />
				<!--<button type="button" class="btn btn-outline-warning" id="randomTrScribe" data-toggle="tooltip" title="Transcribe actual enabled layer setup"><i class="fab fa-buffer"></i></button>
        <button type="button" class="btn btn-outline-warning" id="randomicOpt" data-bs-toggle="modal" data-toggle="tooltip" data-bs-target="#RandOptmodal" title="Option setting for the randomizer"><i class="fas fa-cogs"></i></button>
        <!--class="dropdown d-inline-block " -->
        <div class="btn-group dropend" role="group">
          <button id="dropRandOpt" type="button" class="btn btn-sm btn-outline-warning dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" title="Option setting for the randomizer"  data-bs-auto-close="outside"><i class="fas fa-cogs"></i> </button>
            <div id="randOptbody" aria-labelledby="dropRandOpt" class="dropdown-menu eq-lay1 border border-warning p-2" style="width:22rem;">
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="rndOnOff">
                <label class="form-check-label" for="rndOnOff"><details><summary>Turn On/Off layers</summary>It enable activation of un-active layers ( un-active layers are identified by Opacity=0 ).</details></label>
              </div><!--
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="rndAll" disabled>
                <label class="form-check-label" for="rndAll" ><details><summary>Randomize all layers</summary>Without this option ONLY the already active layers can obtain randomized values.</details></label>
              </div> //-->
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="rndMbWild">
                <label class="form-check-label" for="rndMbWild"><details><summary>Wild randomize microblends</summary>On a basis, the microblend are setup to use the flat default microblend, the last two are assigned with dirts and only one is chosen to get a possible randomized one. Enabling this option remove this system and just randomize every layer filtered from the previous options.</details></label>
              </div>
            </div>
        </div>
      </div>
    </div>
    <div class="my-2 text-center">
      <div class="btn-group">
        <button class="btn btn-sm btn-outline-secondary " type="button" id="clean-Layer" data-toggle="tooltip" data-bs-placement="bottom" title="Reset to blank the selected layer"><i class="fas fa-eraser fa-2x"></i></button>
        <button type="button" class="btn btn-outline-secondary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-expanded="false">
          <span class="visually-hidden">Toggle Dropdown</span>
        </button>
        <ul class="dropdown-menu dropdown-menu-end text-right">
          <li><a class="dropdown-item" href="#" id="wipe-layer"><i class="fas fa-eraser"></i> wipe all layers</a></li>
          <li><a class="dropdown-item" href="#" id="wash-layers"><i class="fas fa-soap"></i> clean all layers</a></li>
        </ul>
      </div>
      <button class="btn btn-sm btn-outline-warning" type="button" id="actlast-Layer" data-toggle="tooltip" data-bs-placement="bottom" title="Activate the last unactive layer"><i class="fas fa-plug fa-2x"></i></button>
      <!--<button class="btn btn-outline-danger" type="button" id="wipe-layer" data-toggle="tooltip" data-bs-placement="bottom" title="Wipe all layers configuration"><i class="fas fa-soap"></i> </button>-->
    </div>
		<div class="twoColGrid">
	    <div class="layer-1 m-2"><span class="badge w-100 rounded-0 "> Ratio </span>
	      <input type="number" class="form-control rounded-0" data-toggle="tooltip" title="Horizontal/vertical ratio of the application of material maps over the model. value lower than 1 stretch horizontally, value higher than 1 stretch vertically" id="layerRatio" value="1.0" step="0.01">
	    </div>
			<div class="layer-1 m-2"><span class="badge w-100 rounded-0 "> Normal </span>
				<div class="form-check form-switch d-flex justify-content-center">
					<input class="form-check-input " type="checkbox" role="switch" id="useNormals" checked>
					<!--<label class="form-check-label ml-2" for="flexSwitchCheckDefault">ON</label>-->
				</div>
			</div>
		</div>
  </div>
  <div id="layer_settings" class="layer-1 rounded">
      <span class="badge w-100 rounded-0">Material</span>
			<div id="matdisplay" class=" no-gutters layer-3" >
					<img id="materialChoser" src="images/material/unused.jpg" width="170" height="170" data-bs-toggle="modal" data-bs-target="#materialModal" title="Click to choose a new material for the selected layer" />
				<div>
					<div>
						<div>
		          <div class="input-group input-group-sm">
		              <div class="badge my-auto">Tiles</div>
		            <input type="number" class="form-control rounded-0" id="layerTile" value="1.0" step="0.1" >
		          </div>
		          <div class="input-group input-group-sm">
		            <div class="badge my-auto">Opacity</div>
		            <input type="number" class="form-control form rounded-0" id="layerOpacity" value="1.0" step="0.01" min="0">
		          </div>
		        </div>
						<div class="eq-lay2">
		          <div class="input-group input-group-sm">
		              <div class="badge my-auto">Offset U</div>
		            <input type="number" class="form-control rounded-0" id="layerOffU" value="0.0" step="0.01">
		          </div>
		          <div class="input-group input-group-sm">
		              <div class="badge my-auto">Offset V</div>
		            <input type="number" class="form-control rounded-0" id="layerOffV" value="0.0" step="0.01">
		          </div>
		        </div>
					</div>

				</div>
			</div>
			<details id="legacyMatSector"><summary id="materialSummary" >unused</summary>
			<div class="input-group mb-1">
				<input type="text" class="form-control rounded-0 " id="matInput" data-default="base\surfaces\materials\special\unused.mltemplate" value="base\surfaces\materials\special\unused.mltemplate">
			</div>
			<div class="input-group layer-4">
				<input id="legacyMatFinder" class="form-control" type="text" placeholder="Filter the materials" aria-label="material searcher">
				<button type="button" id="legacyMatFinderCleared"  data-toggle="tooltip" title="Clear the search field" class="btn text-warning"><i class="fa fa-times"></i> </button>
			</div>
			<div id="legacyMaterial" >
				<ul class="p-0" id="materiaList">
				</ul>
			</div>
			</details>
      <div class="twoColGrid layer-1">
        <div>
          <span class="badge  w-100 rounded-0 ">Normals</span>
          <select class="form-select rounded-0" id="layerNormal" aria-label="microblends selection lists">
            <optgroup id="defaultNormal" label='Reset'>
              <option value="null">null</option>
            </optgroup>
            <optgroup id="Norm_Pow_values" label='Materials'></optgroup>
          </select>
        </div>
        <div>
          <span class="badge  w-100 rounded-0 ">Metal Out</span>
          <select class="form-select rounded-0" id="layerMetalOut" aria-label="metallness Out">
						<optgroup id="defaultMetalOut" label='Reset'>
              <option value="null">null</option>
            </optgroup>
						<optgroup id="Metal_Out_values" label='material'></optgroup>
          </select>
        </div>
        <div>
          <span class="badge w-100 rounded-0 ">Rough In</span>
          <select class="form-select rounded-0" id="layerRoughIn" aria-label="metallness Out">
            <optgroup label="Reset"><option value="null" >null</option></optgroup>
            <optgroup id="Rough_In_values" label="Material"></optgroup>
          </select>
        </div>
        <div>
          <span class="badge  w-100 rounded-0 ">Rough Out</span>
          <select class="form-select rounded-0" id="layerRoughOut" aria-label="RoughnessOut">
            <optgroup label="Reset"><option value="null" >null</option></optgroup>
            <optgroup label="Material specific" id="Rough_out_values"></optgroup>
          </select>
        </div>
      </div>
      <div id="colorGrid">
        <div><span class="badge  w-100 rounded-0">ColorCode</span><input type="text" class="form-control rounded-0" id="layerColor" value="null_null" maxlength="13"></div>
        <div><span class="badge  w-100 rounded-0">Color list</span>
          <select class="form-select rounded-0" id="LayerColorL" aria-label="microblends selection lists">
            <option selected disabled>select a color</option>
            <optgroup id="defaultcolors" label='Default'>
              <option style="color:rgb(50%,50%,50%);" value="rgb(50%,50%,50%);" >null_null</option>
            </optgroup>
            <optgroup id="materialcolors" label='Materials'></optgroup>
          </select>
        </div>
        <div><span class="badge  w-100 rounded-0" id="colorPntage">rgb();</span><span class="badge border border-secondary w-100 rounded-0 tint" > </span></div>
        <div class="text-center"><span class="badge  w-100 rounded-0"> </span>
          <!--<button type="button" id=""  data-toggle="tooltip" title="resort colors by" class="btn  btn-sm btn-outline-warning"><i class="fa-solid fa-sort"></i></button>-->
          <input type="checkbox" class="btn-check" id="colororder" checked autocomplete="off">
          <label class="btn btn-outline-warning btn-sm" for="colororder"><i class="fa-solid fa-sort"></i></label>
        </div>
      </div>
      <div id="colordisplay" class="layer-1">
        <div id="cagecolors"><span style="background-color:rgb(50%,50%,50%);" title='null_null' >&nbsp;</span></div>
      </div>
			<!--
      <div id="MaterialLibrary" class="mt-3">
        <span class="badge w-100 rounded-0" >Material library search</span>
        <div class="input-group input-group-sm mb-1">
          <input type="text" class="form-control rounded-0" id="matFinder" placeholder="search for a material in the library">
          <button type="button" id="matFinderCleared" class="btn text-warning layer-3"><i class="fa fa-times"></i> </button>
        </div>
        <div id="cagethematerials"  >
          <div id="materialTrees" class="layer-1" ></div>
        </div>
      </div>-->
  </div>
  <div id="micropanel" class="layer-1 rounded">
    <div>
      <span class="badge  w-100 rounded-0">&micro;blends</span>
			<div class="input-group input-group-sm mb-1">
      	<input type="text" class="form-control rounded-0 " id="mbInput" data-default="base\surfaces\microblends\default.xbm" value="base\surfaces\microblends\default.xbm" />
				<button class="btn btn-outline-danger rounded-0" id="resetMB" data-toggle='tooltip' title="Reset to default microblend" type="button"><i class="fas fa-times"></i></button>
			</div>
      <select class="form-select rounded-0" id="mbSelect" aria-label="microblends selection lists">
        <option data-package="source" data-thumbnail="./images/_nopreview.gif" value="" disabled >custom</option>
        <option data-package="source" data-thumbnail="./images/default.gif" value="base\surfaces\microblends\default.xbm" selected >default</option>
      </select>
      <span class="badge  w-100 rounded-0 ">Preview</span>
      <img id="mb-preview" style="background-color:#000;" alt="microblend preview" src='./images/default.gif' >
			<div class='row gx-0'>
				<div class="col-10 m-0">
		      <input id="bg-changer" type="color" value="#000000" data-toggle="tooltip" title="Background color check for microblend">
				</div>
				<div class="col-2 m-0">
					<div class="btn-group btn-group-sm w-100" role="group" aria-label="microblend fx">
		        <button class="btn btn-outline-info rounded-0" id="cleanFX" data-toggle='tooltip' title="Cleanup effects on microblend preview" type="button"><i class="fas fa-chalkboard"></i></button>
		      </div>
					<div class="btn-group btn-group-sm  w-100" role="group" aria-label="microblend fx">
					<button class="btn btn-outline-warning rounded-0" id="lumiFX" data-toggle='tooltip' title="Luminosity FX" type="button"><i class="fas fa-lightbulb"></i></button>
				</div>
				</div>
			</div>
			<div id="MicroblendsLibrary">
        <span class="badge w-100 rounded-0" >core microblends</span>
        <div id="microdisplay" class="layer-1">
          <div id="cagethemicroblends" >
            <li style="background-image:url('./images/thumbs/default.gif');" data-package='source' data-toggle="tooltip" title="default"> </li>
          </div>
        </div>
      </div>
      <div id="CustMicroblendsGallery">
        <span class="badge w-100 rounded-0" >custom microblends <div class="btn-group btn-tiny" role="group" aria-label="Custom microblends button">
          <button type="button" id="btn_dis_cBlend" class="btn btn-outline-warning"><i class="fa-solid fa-eye"></i></button>
        </div></span>
        <div id="cu_mu_display" class="layer-1 d-none">
        </div>
      </div>
      <!-- microblends-data -->
      <div class="input-group input-group-sm layer-1 my-1"> <div class="badge my-auto">&micro;blend Tile</div> <input type="number" class="form-control rounded-0 " id="mbTile" value="1.0" step="0.01"> </div>
      <div class="input-group input-group-sm layer-1 mb-1">
        <div class="badge my-auto">&micro;blend contrast</div>
        <input type="number" class="form-control rounded-0" id="mbCont" value="0.0" step="0.1"  data-toggle="tooltip" title="It affect the blending of the microblend trasparency (from 0 to 1) lower value -> lower blending of the transparency, higher value -> better blending and less crisp blending edge" >
      </div>
      <div class="input-group input-group-sm layer-1 mb-1">
          <div class="badge my-auto">&micro;blend normals</div>
        <input type="number" class="form-control rounded-0" id="mbNorm" value="1.0" step="0.1">
      </div>
      <div class="layer-3 m-1 p-1">
        <span class="badge w-100 rounded-0 ">&micro;blend offset</span>
        <div class="twoColGrid my-1">
          <div class="input-group input-group-sm">
            <span class="input-group-text rounded-0 bg-dark text-warning  border-0">U</span> <input type="number" class="form-control rounded-0 text-end" id="mbOffU" value="0" step="0.01">
          </div>
          <div class="input-group input-group-sm">
            <span class="input-group-text rounded-0 bg-dark text-warning border-0">V</span> <input type="number" class="form-control rounded-0 text-end" id="mbOffV" value="0" step="0.01">
          </div>
        </div>
        <div class="d-grid">
          <button class="btn layer-4 text-white btn-sm" data-bs-toggle="modal" data-bs-target="#AimBlend" type="button"><i class="fas fa-crosshairs"></i> &micro; Aim</button>
        </div>
      </div>
    </div>
      <div id="versionDisplay" class="p-2">
        <a href="#" class="d-none" data-bs-toggle="modal" data-bs-target="#LicenseModal">License</a>
        <a href="#" class="d-none" data-bs-toggle="offcanvas" data-bs-target="#HowDoI">?</a>
				<a href="#" class="d-none" data-bs-toggle="modal" data-bs-target="#unCookModal">unCook</a>
				<a href="#" class="d-none" data-bs-toggle="offcanvas" data-bs-target="#HairTool">Hair Tool</a>
				<a href="#" class="d-none" data-bs-toggle="modal" data-bs-target="#uncookMicro">Microblend Build</a>
      </div>
    </div>
  </div>
</div>

<div class="modal fade " id="materialModal"  tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl rounded-0">
    <div class="modal-content rounded-0">
      <div class="modal-body p-0">
				<div>
					<div class="input-group">
					  <input type="text" id="matModFinder" class="form-control rounded-0" placeholder="filter by material name" aria-label="Material name">
						<!--<button class="btn btn-Prim rounded-0" type="button" id="matModSearch">search</button>-->
						<button type="button" id="matModFinderCleared" data-bs-toggle="tooltip" title="clean-up the searching field" class="btn text-warning layer-3"><i class="fa fa-times"></i> </button>
					</div>
				</div>
				<div ><div id="cagemLibrary" class="matColGrid_spaced" > </div></div>
				<div id='matfindresults' class="p-1 pb-2"></div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade " id="masksModal"  tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl rounded-0">
    <div class="modal-content rounded-0">
      <div class="modal-body p-0">
				<div>
					<div class="input-group">
						<button type="button" id="masksFinderClearer" data-bs-toggle="tooltip" title="clean-up the searching field" class="btn text-warning layer-3"><i class="fa fa-times"></i> </button>
					  <input type="text" id="masksCFinder" class="form-control rounded-0" placeholder="search in the masklist" aria-label="Masks paths">
						<!--<button class="btn btn-Prim rounded-0" type="button" id="matModSearch">search</button>-->

					</div>

				</div>
				<div>
					<div class="input-group input-group-sm">
						<span class="input-group-text bg-secondary text-dark border-0 rounded-0"><i class="fas fa-mask"></i></span>
						<span id="lblmaskselected" class="input-group-text text-secondary flex-grow-1 border-0 rounded-0 fs-80">none</span>
						<button type="button" id="choseThisMask" class="btn btn-outline-error rounded-0">Choose</button>
					</div>
					<select id="customMaskSelector" class="form-select rounded-0 p-0" size="20" aria-label="size 3 select example">
					</select>
				</div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade " id="unCookModal" data-bs-backdrop="static" data-bs-keyboard="true" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl rounded-0">
    <div class="modal-content rounded-0">
      <div class="modal-body p-0 ">
				<div class="row no-gutters">
					<div id='uncookCheck' class="col-7 p-3">
						<div class="form-check form-switch">
						  <input class="form-check-input" type="checkbox" role="switch" id="arc_NC3" checked>
							<span class="badge bg-warning text-dark">basegame_3_nightcity.archive</span>
						</div>
						<div class="progress border border-dark  my-1 layer-0" style="height: 1.5rem;" >
						  <div id="uncook_step1" class="progress-bar bg-warning progress-bar-striped progress-bar-animated text-dark" style="width:0%;" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
							<div id="uncook_step2" class="border-start border-dark progress-bar bg-normal progress-bar-striped progress-bar-animated text-dark" style="width:0%;" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
						</div>
						<div class="form-check form-switch">
							<input class="form-check-input" type="checkbox" role="switch" id="arc_AP4" checked>
							<span class="badge bg-warning text-dark">basegame_4_appearance.archive</span>
						</div>
						<div class="progress border border-dark  my-1 layer-0" style="height: 1.5rem;" >
							<div id="uncook_step3" class="progress-bar bg-warning progress-bar-striped progress-bar-animated text-dark" style="width:0%;" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
							<div id="uncook_step4" class="border-start border-dark progress-bar bg-normal progress-bar-striped progress-bar-animated text-dark" style="width:0%;" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
						</div>
						<div class="form-check form-switch">
							<input class="form-check-input" type="checkbox" role="switch" id="arc_GA4" checked>
							<span class="badge bg-warning text-dark">basegame_4_gamedata.archive</span>
						</div>
						<div class="progress border border-dark  my-1 layer-0" style="height: 1.5rem;" >
							<div id="uncook_step5" class="progress-bar bg-warning progress-bar-striped progress-bar-animated text-dark" style="width:0%;" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
							<div id="uncook_step6" class="border-start border-dark progress-bar bg-normal progress-bar-striped progress-bar-animated text-dark" style="width:0%;" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
						</div>
						<!-- TODO to this code-->
						<div class="form-check form-switch">
							<input class="form-check-input" type="checkbox" role="switch" id="arc_DEC4" checked>
							<span class="badge bg-warning text-dark">Decal materials</span>
						</div>
						<div class="progress border border-dark  my-1 layer-0" style="height: 1.5rem;" >
							<div id="uncook_step7" class="border-start border-dark progress-bar bg-success progress-bar-striped progress-bar-animated text-dark" style="width:0%;" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
							<div id="uncook_step8" class="border-start border-dark progress-bar bg-warning progress-bar-striped progress-bar-animated text-dark" style="width:0%;" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
						</div>
						<!-- TODO to this code-->
						<div class="text-center mt-3"><i id="uncookCog" class="fas fa-cog fa-pulse fa-4x text-danger d-none"></i></div>
					</div>
					<div id="uncookLogger" class="col-5 p-1 layer-0" >
						<div class="text-muted"> </div>
					</div>
      </div>
    </div>
		<div class="modal-footer justify-content-between p-1">
				<button type="button" class="btn btn-sm btn-outline-warning" id="triggerUncook" >Uncook</button>
        <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-dismiss="modal">Close</button>
      </div>
  </div>
</div>
</div>

<div class="modal fade " id="uncookMicro" data-bs-backdrop="static" data-bs-keyboard="true" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg rounded-0">
    <div class="modal-content rounded-0">
      <div class="modal-body p-0 ">
				<div class="row no-gutters">
					<div id='microprep' class="col-4 p-3">
						<span class="experimental ">&micro;blends Creation</span>
						<span class="badge d-block bg-warning text-dark mt-4">Uncook</span>
						<div class="progress border border-dark  mb-3 layer-0" style="height: 1.5rem;" >
							<div id="uncook_micro_opt01" class="progress-bar bg-info progress-bar-striped progress-bar-animated text-dark" style="width:0%;" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
							<div id="uncook_micro_opt02" class="progress-bar bg-info progress-bar-striped progress-bar-animated text-dark" style="width:0%;" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
							<div id="uncook_micro_opt03" class="progress-bar bg-info progress-bar-striped progress-bar-animated text-dark" style="width:0%;" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
						</div>
						<span class="badge d-block bg-warning text-dark">Resize</span>
						<div class="progress border border-dark  mb-3 layer-0" style="height: 1.5rem;" >
							<div id="uncook_mresize" class="progress-bar bg-info progress-bar-striped progress-bar-animated text-dark" style="width:0%;" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
						</div>
						<span class="badge d-block bg-warning text-dark">Thumb</span>
						<div class="progress border border-dark  mb-3 layer-0" style="height: 1.5rem;" >
							<div id="uncook_mthumbs" class="progress-bar bg-info progress-bar-striped progress-bar-animated text-dark" style="width:0%;" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
						</div>
						<div class="text-center mt-3"><i id="mycroCog" class="fas fa-cog fa-pulse fa-4x text-warning d-none"></i></div>
					</div>
					<div id="microLogger" class="col-8 p-1 layer-0" >
						<div class="text-muted"> </div>
					</div>
      </div>
    </div>
		<div class="modal-footer justify-content-between p-1">
				<button type="button" class="btn btn-sm btn-outline-warning" id="MycroMe" >Start</button>
        <button type="button" class="btn btn-sm btn-outline-secondary" data-bs-dismiss="modal">Close</button>
      </div>
  </div>
</div>
</div>


<!--
<div class="modal fade" id="modalInfo" tabindex="-1" aria-labelledby="modelsInfoH" aria-hidden="true" data-focus="true">
<div class="modal-dialog modal-xl modal-dialog-centered">
  <div class="modal-content ">
    <div class="modal-header bg-info text-dark">
      <h5 class="modal-title" id="modelsInfoH"><i class="fas fa-info-circle"></i> Model information</h5>
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
		<div class="row no-gutter">
	    <div class="col-4"><div class="modal-body text-white" style="background-color:#121212;min-height:100%"></div></div>
			<div class="col-8 text-center"> </div>
		</div>
  </div>
</div>
</div>
-->
<!-- A modal for the setup of the option randomizer -->
<!-- windows for aiming the microblend over the masks -->
<div class="modal fade" id="AimBlend" tabindex="-1" aria-labelledby="aimblendLBL" aria-hidden="true">
<div class="modal-dialog modal-lg">
  <div class="modal-content">
    <!--<div class="modal-header bg-secondary text-white">
      <h5 class="modal-title" id="aimblendLBL">&micro;blend aiming</h5>
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>-->
    <div class="modal-body text-white">
      <div id="aimGRID">
        <!--both canvas -->
        <canvas id="MaskTargettoAim" class="border border-dark" height="512" width="512"></canvas>
        <canvas contenteditable="true" id="maskFabric" style="display: block;position: absolute;float: left;left: calc(1rem + 21px);"class="border border-info" height="512" width="512" > </canvas>
        <!--microblend application -->
        <div id="aimPanels" class="layer-1">
          <span class="badge  w-100 rounded-0 layer-1">horizontal: <span id="dispAimU"></span></span>
          <input id="AimU" class="w-100" type="range" min="-10.0" max="10.0" value="0.0" step="0.001">
          <span class="badge  w-100 rounded-0 layer-1">vertical: <span id="dispAimV"></span></span>
          <input id="AimV" class="w-100" type="range" min="-10.0" max="10.0" value="0.0" step="0.001">
          <span class="badge  w-100 rounded-0 layer-1">mbTile: <span id="dispAimTile"></span></span>
          <input id="AimMTile" class="w-100" type="range" min="0.05" max="80.0" value="0.0" step="0.001">
          <!--<span class="badge  w-100 rounded-0 layer-1">Chained To the Layer</span>-->
          <div class="form-check form-switch my-2 ">
            <input class="form-check-input ml-3" type="checkbox" id="AimChain" >
            <label class="form-check-label" for="AimChain">Chained To the Layer</label>
          </div>
          <!--<input id="AimChain" class="w-100"  min="0.01" max="4.0" value="0.0" step="0.01">-->
          <div class="d-grid gap-2 col-6 mx-auto">
            <button id="confirmAim" class="btn btn-sm btn-block btn-outline-warning" >Done</button>
            <button id="reloadAim" class="btn btn-sm btn-block btn-outline-danger" >Reset</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>

<div class="modal fade" id="modalHelp" tabindex="-1" aria-labelledby="modelsHelpH" aria-hidden="true" data-focus="true">
<div class="modal-dialog modal-xl modal-dialog-centered">
  <div class="modal-content ">
    <div class="modal-header bg-info text-dark">
      <h5 class="modal-title" id="modelsHelpH"><i class="fas fa-question"></i> How to use the software</h5>
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body text-white">
      The software is ment to help in creating .json files that can be compiled in .mlsetup format and assigned with everything that use the Cyberpunk 2077 multilayer systems
      <ul>
      <li>The multilayer editor system does not need a model to be displayed in the viewport to work</li>
      <li>It has a 3d viewport to load exported 3d models from the game useful to see a corrispondence between masks and the layer you are editing on the mesh.</li>
      <li>A searchable library with simble indication on model use (car bike, garment for men, woman or kid)</li>
      <li>It can import .mlsetup files exported to json format</li>
      <li>There is a material database that include every basic material the game use and automatically load value for normals, colors,metalness and roughness</li>
      <li>There is a color picker with swatches compiled from the loaded materials</li>
      <li>There is a microblend preview display</li>
      <li>Developed a visual system for microblend positioning over the current layer mlmasks, with that you can:
        <ul>
          <li>Resize the microblend to fit the masks space</li>
          <li>Position vertically and horizontally the microblend</li>
          <li>Sync the microblend values with the layers one. Useful to get the perfect corrispondence when you are placing graphic_logos microblend and materials </li>
        </ul>
      </li>
      <li>You can explicit custom path for materials and microblends</li>
      <li>Property randomizer for layers with simple configuration window</li>
      </ul>
    </div>
  </div>
</div>
</div>
<!-- License agreement -->
<div class="modal fade " id="LicenseModal" tabindex="-1" aria-labelledby="LicenseModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl rounded-0">
    <div class="modal-content rounded-0">
      <div class="modal-body p-0">
				<div class="row m-0">
					<div class="col mlsblogo">
				<img src="./images/system/MlsbLogo.gif">
			</div><div class="col">
        <ul class="nav nav-tabs" id="LicenseTab" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="mainTab" data-bs-toggle="tab" data-bs-target="#mainL" type="button" role="tab" aria-controls="mainL" aria-selected="true">MlsetupBuilder License</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="threejsTab" data-bs-toggle="tab" data-bs-target="#threejslicense" type="button" role="tab" aria-controls="threejslicense" aria-selected="false">Three.js License</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="JQColTab" data-bs-toggle="tab" data-bs-target="#jquerylicense" type="button" role="tab" aria-controls="jquerylicense" aria-selected="false">Jquery 3.6.0 License</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="TinyColTab" data-bs-toggle="tab" data-bs-target="#tinycollicense" type="button" role="tab" aria-controls="tinycollicense" aria-selected="false">Tinicolor.js License</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="jstreeTab" data-bs-toggle="tab" data-bs-target="#jstreelicense" type="button" role="tab" aria-controls="jstreelicense" aria-selected="false">jstree License</button>
          </li>
        </ul>
        <div class="tab-content" id="tabLicenseBox">
          <div class="tab-pane fade " id="jquerylicense" role="tabpanel" aria-labelledby="JQColTab"><code class="text-light">
<p class="text-center">Copyright OpenJS Foundation and other contributors, https://openjsf.org/</p>

<p>Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:</p>

<p>The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
          </code></div>
          <div class="tab-pane fade " id="tinycollicense" role="tabpanel" aria-labelledby="TinyColTab"><code class="text-light">
<p class="text-center">Copyright (c), Brian Grinstead, http://briangrinstead.com</p>
<p>Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:</p>

<p>The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
            </code>
          </div>
          <div class="tab-pane fade" id="jstreelicense" role="tabpanel" aria-labelledby="jstreeTab"><code class="text-light">
<p class="text-center">Copyright (c) 2014 Ivan Bozhanov</p>

<p>Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:</p>

<p>The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.</p></code>
          </div>
          <div class="tab-pane fade" id="threejslicense" role="tabpanel" aria-labelledby="threejsTab"><code class="text-light">
            <p class="text-center">Copyright © 2010-2021 three.js authors</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.</p>
</div></code>
          <div class="tab-pane fade show active" id="mainL" role="tabpanel" aria-labelledby="home-tab"><code class="text-light">
<p>This is MlsetupBuilder a web application ment to create json .mlsetup files usable in the modding workflow of the game Cyberpunk 2077</p>
<p class="text-center">Copyright (C) 2021  Neurolinked</p>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License along with this program.  If not, see <a href="https://www.gnu.org/licenses/">https://www.gnu.org/licenses/</a>.</p>
<p>You can contact me sending an e-mail to neurocode@kientzproduction.com</p></code>
          </div>
        </div>
			</div></div>
      </div>
    </div>
  </div>
</div>
  <ul id="layers-contextual">
    <li data-action="cpall"><i class="fa-solid fa-copy"></i> Copy all attributes</li>
    <li data-action="pstall" disabled><i class="fa-solid fa-square"></i> Paste attributes</li>
    <li data-action="cpmb"><i class="fa-solid fa-shapes"></i> Copy microblends data</li>
    <li data-action="pstmb" disabled><i class="fa-solid fa-paste"></i> Paste microblends data</li>
		<li data-action="cpcol"><i class="fa-solid fa-eye-dropper"></i> Copy color</li>
		<li data-action="pstcol" disabled><i class="fa-solid fa-paintbrush"></i> Paste color</li>
  </ul>
  <script defer src='./js/3dIF.js'></script>
  <script src="./renderer.js"></script>
	<script type="text/javascript" src="./node_modules/intro.js/minified/intro.min.js" ></script>
  </body>
</html>
